<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
  <title>Start Your Free Trial | Broker Toolkit</title>
  <meta name="description" content="Start your free Broker Toolkit trial. Get Newsletter Pro, Activity Tracker, Rate Monitor, and Loan Advisor in one platform.">
  <link rel="canonical" href="https://brokertoolkit.app/join">
  <meta property="og:title" content="Start Your Free Trial | Broker Toolkit">
  <meta property="og:description" content="Start your free Broker Toolkit trial in under a minute.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://brokertoolkit.app/join">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Start Your Free Trial | Broker Toolkit">
  <meta name="twitter:description" content="Start your free Broker Toolkit trial in under a minute.">
  <link rel="stylesheet" href="styles.css">
  <style>
    .join-shell { min-height: 100vh; background: linear-gradient(180deg,#162542 0,#1a2040 60%,#162542 100%); }
    .join-nav {
      position: sticky; top: 0; z-index: 20; background: rgba(22,37,66,.9); backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(76,68,211,.18);
    }
    .join-nav-inner {
      max-width: 1100px; margin: 0 auto; padding: .85rem 1.25rem;
      display: flex; align-items: center; justify-content: space-between;
    }
    .join-logo img { width: 40px; height: 40px; }
    .join-nav-link { color: #a5b4fc; font-size: .92rem; font-weight: 600; }
    .join-main { padding: 3rem 1.25rem 4rem; }
    .join-grid {
      max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: 1.1fr 1fr; gap: 2rem; align-items: start;
    }
    .join-copy h1 { font-size: clamp(2rem, 5vw, 3.2rem); margin-bottom: 1rem; }
    .join-copy p { color: #cbd5e1; margin-bottom: 1.1rem; max-width: 54ch; }
    .join-points { list-style: none; padding: 0; margin: 1.2rem 0 0; }
    .join-points li { color: #e2e8f0; margin-bottom: .7rem; display: flex; gap: .55rem; }
    .join-points li::before { content: 'âœ“'; color: #22c55e; font-weight: 700; }

    .join-card {
      background: rgba(15,23,42,.7); border: 1px solid rgba(76,68,211,.25); border-radius: 16px;
      padding: 1.4rem; box-shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    .join-card h2 { font-size: 1.35rem; margin-bottom: .2rem; }
    .join-card p { color: #94a3b8; margin-bottom: 1.1rem; }
    .join-field { margin-bottom: .9rem; }
    .join-field label { display: block; color: #cbd5e1; font-weight: 600; font-size: .88rem; margin-bottom: .35rem; }
    .join-field input {
      width: 100%; padding: .8rem .85rem; background: #0f172a; border: 1px solid rgba(100,116,139,.45);
      border-radius: 10px; color: #e2e8f0; font-size: .95rem;
    }
    .join-field input:focus { outline: none; border-color: #6e5ce7; box-shadow: 0 0 0 2px rgba(110,92,231,.2); }
    .join-btn {
      width: 100%; margin-top: .35rem; border: none; cursor: pointer;
      background: linear-gradient(135deg,#4c44d3,#5b52e0); color: #fff;
      padding: .9rem 1rem; border-radius: 10px; font-weight: 700; font-size: .95rem;
    }
    .join-btn:disabled { opacity: .65; cursor: not-allowed; }
    .join-note { margin-top: .75rem; font-size: .78rem; color: #94a3b8; }
    .join-status { margin-top: .85rem; font-size: .9rem; min-height: 1.25rem; }
    .join-status.ok { color: #22c55e; }
    .join-status.err { color: #f87171; }

    .join-footer-links { margin-top: 2rem; display: flex; gap: 1rem; flex-wrap: wrap; }
    .join-footer-links a { color: #94a3b8; font-size: .83rem; }

    @media (max-width: 900px) {
      .join-grid { grid-template-columns: 1fr; }
      .join-main { padding-top: 2.2rem; }
    }
  </style>
</head>
<body>
  <div class="join-shell">
    <header class="join-nav">
      <div class="join-nav-inner">
        <a class="join-logo" href="/" aria-label="Broker Toolkit home">
          <img src="assets/logo-icon.png" alt="Broker Toolkit">
        </a>
        <a class="join-nav-link" href="https://my.brokertoolkit.app">Already have an account? Sign in</a>
      </div>
    </header>

    <main class="join-main">
      <div class="join-grid">
        <section class="join-copy">
          <h1>Start your Broker Toolkit free trial</h1>
          <p>Everything you need to stay visible, accountable, and productive in one platform. Fill this out and we will spin up your trial right away.</p>
          <ul class="join-points">
            <li>Newsletter Pro for fast AI newsletter creation</li>
            <li>Activity Tracker for daily production accountability</li>
            <li>Rate Monitor + Loan Advisor included</li>
            <li>Built for mortgage professionals</li>
          </ul>
        </section>

        <section class="join-card" aria-label="Free trial signup form">
          <h2>Claim your free trial</h2>
          <p>Takes less than a minute.</p>

          <form id="trial-signup-form" novalidate>
            <div class="join-field">
              <label for="firstName">First name *</label>
              <input id="firstName" name="firstName" type="text" autocomplete="given-name" required>
            </div>
            <div class="join-field">
              <label for="lastName">Last name *</label>
              <input id="lastName" name="lastName" type="text" autocomplete="family-name" required>
            </div>
            <div class="join-field">
              <label for="email">Work email *</label>
              <input id="email" name="email" type="email" autocomplete="email" required>
            </div>
            <div class="join-field">
              <label for="companyName">Company name (optional)</label>
              <input id="companyName" name="companyName" type="text" autocomplete="organization">
            </div>

            <button class="join-btn" id="submitBtn" type="submit">Start free trial</button>
            <div class="join-status" id="joinStatus" aria-live="polite"></div>
            <p class="join-note">By submitting, you agree to our terms and privacy policy.</p>
          </form>
        </section>
      </div>

      <div class="join-grid" style="margin-top:0;">
        <div class="join-footer-links">
          <a href="terms">Terms</a>
          <a href="privacy">Privacy</a>
        </div>
      </div>
    </main>
  </div>

  <script>
    (function() {
      const form = document.getElementById('trial-signup-form');
      const statusEl = document.getElementById('joinStatus');
      const submitBtn = document.getElementById('submitBtn');

      const params = new URLSearchParams(window.location.search);
      const attribution = {
        utm_source: params.get('utm_source') || '',
        utm_medium: params.get('utm_medium') || '',
        utm_campaign: params.get('utm_campaign') || '',
        utm_content: params.get('utm_content') || '',
        utm_term: params.get('utm_term') || ''
      };

      function track(eventName, extra) {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push(Object.assign({
          event: eventName,
          page_type: 'join',
          page_path: '/join'
        }, attribution, extra || {}));
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const payload = {
          email: String(formData.get('email') || '').trim(),
          firstName: String(formData.get('firstName') || '').trim(),
          lastName: String(formData.get('lastName') || '').trim(),
          companyName: String(formData.get('companyName') || '').trim()
        };

        if (!payload.email || !payload.firstName || !payload.lastName) {
          statusEl.textContent = 'Please complete all required fields.';
          statusEl.className = 'join-status err';
          track('trial_signup_validation_error', { reason: 'missing_required_fields' });
          return;
        }

        submitBtn.disabled = true;
        submitBtn.textContent = 'Submitting...';
        statusEl.textContent = '';
        statusEl.className = 'join-status';

        track('trial_signup_submit', { has_company: !!payload.companyName });

        try {
          const res = await fetch('/api/trial-signup', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          const data = await res.json().catch(() => ({}));

          if (!res.ok) {
            throw new Error(data.error || 'Signup failed');
          }

          track('trial_signup_success', { has_company: !!payload.companyName });
          statusEl.textContent = 'Success. Your free trial request was submitted.';
          statusEl.className = 'join-status ok';
          form.reset();
        } catch (err) {
          track('trial_signup_error', { error_message: err.message || 'unknown_error' });
          statusEl.textContent = 'Sorry, we could not submit your request. Please try again.';
          statusEl.className = 'join-status err';
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = 'Start free trial';
        }
      });
    })();
  </script>
</body>
</html>
